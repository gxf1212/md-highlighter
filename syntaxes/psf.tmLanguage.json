{
    "$schema": "https://raw.githubusercontent.com/martinring/tmlanguage/master/tmlanguage.json",
    "name": "PSF from GUI, that from vmd is different",
    "scopeName": "source.psf",
    "fileTypes": [
        "psf"
    ],
    "patterns": [
        {
            "name": "comment.line.psf",
            "match": "^\\*.*$"
        },
        {
            "begin": "^\\s+REMARKS\\b",
            "end": "$",
            "name": "comment.line.remark.pdb"
        },
        {
            "//": "ATOM and BOND is missing...",
            "name": "keyword.psf",
            "match": "\\b(PSF|CMAP|NTITLE|NATOM|NBOND|NTHETA|NPHI|NIMPHI|NDON|NACC|NNB|NGRP|NUMLP|NCRTERM)\\b"
        },
        {
            "name": "entity.name.tag.total_number",
            "match": "(?<=^\\s+)\\d+(?= !N)"
        },
        {
            "begin": "(^\\s*\\d+\\s+!NATOM\\s*$)", 
            "end": "(^\\s*\\d+\\s+!NBOND:\\s+bonds\\s*$)",
            "//": "format: atomid segname resid resname atomname atomtype charge mass unknown",
            "///":"^\\s+\\d+\\s+\\S+\\s+\\d+\\s+\\S+\\s+\\b[A-Z0-9]+\\b\\s+\\b[A-Z0-9]+\\b\\s+(-?\\d+\\.\\d*(E-01)?)\\s+(-?\\d+\\.\\d*)\\s+\\d+$",
            "patterns": [
                {
                    "name": "constant.numeric.atom-number.psf",
                    "match": "(?<=^\\s+)\\d+(?=\\s+\\S+\\s+\\d+\\s+\\S+\\s+\\b[A-Z0-9]+\\b\\s+\\b[A-Z0-9]+\\b\\s+(-?\\d+\\.\\d*(E-01)?)\\s+(-?\\d+\\.\\d*)\\s+\\d+$)"
                },
                {
                    "name": "entity.name.tag.segment-name.psf",
                    "match": "(?<=^\\s+\\d+\\s+)\\S+(?=\\s+\\d+\\s+\\S+\\s+\\b[A-Z0-9]+\\b\\s+\\b[A-Z0-9]+\\b\\s+(-?\\d+\\.\\d*(E-01)?)\\s+(-?\\d+\\.\\d*)\\s+\\d+$)"
                },
                {
                    "name": "constant.numeric.residue-number.psf",
                    "match": "(?<=^\\s+\\d+\\s+\\S+\\s+)\\d+(?=\\s+\\S+\\s+\\b[A-Z0-9]+\\b\\s+\\b[A-Z0-9]+\\b\\s+(-?\\d+\\.\\d*(E-01)?)\\s+(-?\\d+\\.\\d*)\\s+\\d+$)"
                },
                {
                    "name": "support.type.residue-name.psf",
                    "match": "(?<=^\\s+\\d+\\s+\\S+\\s+\\d+\\s+)\\S+(?=\\s+\\b[A-Z0-9]+\\b\\s+\\b[A-Z0-9]+\\b\\s+(-?\\d+\\.\\d*(E-01)?)\\s+(-?\\d+\\.\\d*)\\s+\\d+$)"
                },
                {
                    "name": "entity.name.function.atom-name.psf",
                    "match": "(?<=^\\s+\\d+\\s+\\S+\\s+\\d+\\s+\\S+\\s+)\\b[A-Z0-9]+\\b(?=\\s+\\b[A-Z0-9]+\\b\\s+(-?\\d+\\.\\d*(E-01)?)\\s+(-?\\d+\\.\\d*)\\s+\\d+$)"
                },
                {
                    "name": "variable.other.atom-type.psf",
                    "match": "(?<=^\\s+\\d+\\s+\\S+\\s+\\d+\\s+\\S+\\s+\\b[A-Z0-9]+\\b\\s+)\\b[A-Z0-9]+\\b(?=\\s+(-?\\d+\\.\\d*(E-01)?)\\s+(-?\\d+\\.\\d*)\\s+\\d+$)"
                },
                {
                    "name": "constant.numeric.charge.psf",
                    "match": "(?<=^\\s+\\d+\\s+\\S+\\s+\\d+\\s+\\S+\\s+\\b[A-Z0-9]+\\b\\s+\\b[A-Z0-9]+\\b\\s+)(-?\\d+\\.\\d*(E-01)?)(?=\\s+(-?\\d+\\.\\d*)\\s+\\d+$)"
                },
                {
                    "name": "string.atomic-mass.psf",
                    "match": "(?<=^\\s+\\d+\\s+\\S+\\s+\\d+\\s+\\S+\\s+\\b[A-Z0-9]+\\b\\s+\\b[A-Z0-9]+\\b\\s+(-?\\d+\\.\\d*(E-01)?)\\s+)(-?\\d+\\.\\d*)(?=\\s+\\d+$)"
                },
                {
                    "name": "comment.line.unknown.psf",
                    "match": "(?<=^\\s+\\d+\\s+\\S+\\s+\\d+\\s+\\S+\\s+\\b[A-Z0-9]+\\b\\s+\\b[A-Z0-9]+\\b\\s+(-?\\d+\\.\\d*(E-01)?)\\s+(-?\\d+\\.\\d*)\\s+)\\d+(?=$)"
                }                
            ]
        },
        {
            "name": "constant.numeric.psf",
            "match": "\\b\\d+\\b|(?<=^\\s*)\\d+"
        }
    ]
}